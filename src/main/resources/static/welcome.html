<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Welcome</title>


    <style>
        /* Styling for the message popup */
        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
        }

        .popup-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
            background-color: #fff;
            border: 1px solid #333;
            text-align: center;
        }

        .close {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 20px;
            cursor: pointer;
        }
        #alert {
            position: absolute;
            /* display: none !important; */
            z-index: 999;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
        }
        .alert {
        background-color: #ff0000; /* Red background color for the alert message */
        color: #fff; /* White text color for the alert message */
        padding: 10px;
        font-size: 16px;
        border-radius: 5px;
    }
    .button {
  background-color: #4CAF50;
  border: none;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;
}
 .close-btn {
            top: 10px;
            right: 10px;
            font-size: 20px;
            background: none;
            border: none;
            cursor: pointer;
            color: #ee0f0f;
        }
.close-btn:hover {
            color: #333;
        }
    body {
        background-image: url('healthcare1.jpg');
        background-size: cover; /* Scale the image to cover the entire background */
        background-attachment: fixed; /* Fixed background position while scrolling */
    }
        header {
            background-color: #3498db;
            color: #fff;
            text-align: center;
            padding: 10px;
        }

        footer {
            background-color: #333;
            color: #fff;
            text-align: center;
            padding: 10px;
            position: absolute;
            bottom: 0;
            width: 100%;
        }
        ul.menu {
            list-style-type: none;
            margin: 0;
            padding: 0;
            background-color: #333;
            text-align: center;
        }

        ul.menu li {
            display: inline;
            margin-right: 20px;
        }

        ul.menu li a {
            text-decoration: none;
            color: #fff;
            font-weight: bold;
        }

        ul.menu li a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
<header>
    <h1>Well-being Companion</h1>
</header>
<!-- Add the navigation menu -->
<ul class="menu">
    <li><a href="#">Home</a></li>
    <li><a href="#">Services</a></li>
    <li><a href="#">Contact</a></li>
</ul>
<h1>Welcome, <span id="usernameDisplay"></span>!</h1>
<button id="getInfoButton" class="button" onclick="sendAlert()">Alert!!</button>

<div id="alert" class="alert">
    <div style="
        height: 73px;
        background-color: red;
    "></div>
    <h1 style="color: black !important;display: block;text-align: center;">Alert!</h1>
<ul id="message-list" style="text-align: center">
</ul>
    <div style="text-align: center;">
        <button onclick="closealert()" class="close-btn">Close</button>
    </div>
</div>
<footer>
    <p>&copy; 2023 Well-being Companion</p>

</footer>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script>

        function sendAlert() {
            $("#alert").css("display", "block");
        }
        function closealert() {
            $("#alert").css("display", "none");
        }


    </script>
<script>
        // Function to extract the username from the URL parameters
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        var username = getParameterByName("username");
        var usernameDisplay = document.getElementById("usernameDisplay");
        usernameDisplay.textContent = username;

        // Add a click event listener to the button
        var getInfoButton = document.getElementById("getInfoButton");
        getInfoButton.addEventListener("click", function() {
            // Capture the username from the URL and use it in the GET request
            var url = "/alert?username=" + encodeURIComponent(username);

            // Perform the GET request
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    // Process the response data as needed

                    for (let i = 0; i < data.length; i++) { //made changes here
                             addMessage(data[i]);
                    }
                })
                .catch(error => {
                    alert("Error: " + error);
                });
        });

        function addMessage(newMessage) {
            const messageList = document.getElementById("message-list");
            //const newMessage = prompt("Enter a message:");

            if (newMessage) {
                const listItem = document.createElement("li");
                listItem.textContent = "Message sent to Family Contact " + newMessage;
                messageList.appendChild(listItem);
            }
        }

    </script>
</body>
</html>